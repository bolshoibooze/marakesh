(function(a){a.fn.actions=function(b){var k=a.extend({},a.fn.actions.defaults,b);var c=a(this);var f=false;var e=function(l){if(l){j()}else{i()}a(c).attr("checked",l).parent().parent().toggleClass(k.selectedClass,l)},g=function(){var l=a(c).filter(":checked").length;a(k.counterContainer).html(interpolate(ngettext("%(sel)s of %(cnt)s selected","%(sel)s of %(cnt)s selected",l),{sel:l,cnt:_actions_icnt},true));a(k.allToggle).attr("checked",function(){if(l==c.length){value=true;j()}else{value=false;h()}return value})},j=function(){a(k.acrossClears).hide();a(k.acrossQuestions).show();a(k.allContainer).hide()},d=function(){a(k.acrossClears).show();a(k.acrossQuestions).hide();a(k.actionContainer).toggleClass(k.selectedClass);a(k.allContainer).show();a(k.counterContainer).hide()},i=function(){a(k.acrossClears).hide();a(k.acrossQuestions).hide();a(k.allContainer).hide();a(k.counterContainer).show()},h=function(){i();a(k.acrossInput).val(0);a(k.actionContainer).removeClass(k.selectedClass)};a(k.counterContainer).show();a(this).filter(":checked").each(function(l){a(this).parent().parent().toggleClass(k.selectedClass);g();if(a(k.acrossInput).val()==1){d()}});a(k.allToggle).show().click(function(){e(a(this).is(":checked"));g()});a("div.actions span.question a").click(function(l){l.preventDefault();a(k.acrossInput).val(1);d()});a("div.actions span.clear a").click(function(l){l.preventDefault();a(k.allToggle).attr("checked",false);h();e(0);g()});lastChecked=null;a(c).click(function(m){if(!m){m=window.event}var n=m.target?m.target:m.srcElement;if(lastChecked&&a.data(lastChecked)!=a.data(n)&&m.shiftKey===true){var l=false;a(lastChecked).attr("checked",n.checked).parent().parent().toggleClass(k.selectedClass,n.checked);a(c).each(function(){if(a.data(this)==a.data(lastChecked)||a.data(this)==a.data(n)){l=(l)?false:true}if(l){a(this).attr("checked",n.checked).parent().parent().toggleClass(k.selectedClass,n.checked)}})}a(n).parent().parent().toggleClass(k.selectedClass,n.checked);lastChecked=n;g()});a("form#changelist-form table#result_list tr").find("td:gt(0) :input").change(function(){f=true});a('form#changelist-form button[name="index"]').click(function(l){if(f){return confirm(gettext("You have unsaved changes on individual editable fields. If you run an action, your unsaved changes will be lost."))}});a('form#changelist-form input[name="_save"]').click(function(m){var l=false;a("div.actions select option:selected").each(function(){if(a(this).val()){l=true}});if(l){if(f){return confirm(gettext("You have selected an action, but you haven't saved your changes to individual fields yet. Please click OK to save. You'll need to re-run the action."))}else{return confirm(gettext("You have selected an action, and you haven't made any changes on individual fields. You're probably looking for the Go button rather than the Save button."))}}})};a.fn.actions.defaults={actionContainer:"div.actions",counterContainer:"span.action-counter",allContainer:"div.actions span.all",acrossInput:"div.actions input.select-across",acrossQuestions:"div.actions span.question",acrossClears:"div.actions span.clear",allToggle:"#action-toggle",selectedClass:"selected"}})(yawdadmin.jQuery);